<?php
 require_once( dirname(__FILE__).'/main.php' ); class headers extends main { private $header; function db_add_header( $data ) { $now = $this->get_now_date(); try { $sql = "INSERT INTO `headers` (`header`, `created`) VALUES (:header, :created)"; $this->stmt = $this->pdo->prepare( $sql ); $this->stmt->bindValue( ':header', $data['header'] ); $this->stmt->bindValue( ':created', $now ); $this->stmt->execute(); } catch( PDOException $e ){ die( $e->getMessage() ); } } function db_edit_header( $data ) { $now = $this->get_now_date(); try { $sql = "UPDATE `headers`
					SET `header` = :header, `modified` = :modified
					WHERE `headers`.`id` = :id;"; $this->stmt = $this->pdo->prepare( $sql ); $this->stmt->bindValue( ':header', $data['header'] ); $this->stmt->bindValue( ':modified', $now ); $this->stmt->bindValue( ':id', $data['id'], PDO::PARAM_INT ); $this->stmt->execute(); } catch( PDOException $e ){ die( $e->getMessage() ); } } function db_delete_header( $id ) { $now = $this->get_now_date(); try { $sql = "DELETE FROM `headers`
					WHERE `headers`.`id` = :id;"; $this->stmt = $this->pdo->prepare( $sql ); $this->stmt->bindValue( ':id', $id, PDO::PARAM_INT ); $this->stmt->execute(); } catch( PDOException $e ){ die( $e->getMessage() ); } } function get_all_header( $start, $num, &$data ) { $result = FALSE; $this->db_all_header( $start, $num ); $row = $this->stmt->fetchAll(); $cnt = count( $row ); if($cnt >= 1) { $data = $row; $result = TRUE; } return $result; } private function db_all_header( $start, $num ) { try { $sql = "SELECT * FROM `headers` LIMIT :start, :num"; $this->stmt = $this->pdo->prepare( $sql ); $this->stmt->bindValue( ':start', $start, PDO::PARAM_INT ); $this->stmt->bindValue( ':num', $num, PDO::PARAM_INT ); $this->stmt->execute(); } catch(PDOException $e){ die($e->getMessage()); } } function get_header( $id, &$data ) { $result = false; $this->db_header( $id ); $row = $this->stmt->fetchAll(); $cnt = count( $row ); if($cnt == 1) { $data = $row[0]; $result = true; } return $result; } private function db_header( $id ) { try { $sql = "SELECT * FROM `headers` WHERE `id` = :id"; $this->stmt = $this->pdo->prepare( $sql ); $this->stmt->bindValue( ':id', $id, PDO::PARAM_INT ); $this->stmt->execute(); } catch(PDOException $e){ die($e->getMessage()); } } } 