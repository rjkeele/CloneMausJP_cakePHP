<?php
 require_once( dirname(__FILE__).'/main.php' ); class footers extends main { private $footer; function db_add_footer( $data ) { $now = $this->get_now_date(); try { $sql = "INSERT INTO `footers` (`footer`, `created`) VALUES (:footer, :created)"; $this->stmt = $this->pdo->prepare( $sql ); $this->stmt->bindValue( ':footer', $data['footer'] ); $this->stmt->bindValue( ':created', $now ); $this->stmt->execute(); } catch( PDOException $e ){ die( $e->getMessage() ); } } function db_edit_footer( $data ) { $now = $this->get_now_date(); try { $sql = "UPDATE `footers`
					SET `footer` = :footer, `modified` = :modified
					WHERE `footers`.`id` = :id;"; $this->stmt = $this->pdo->prepare( $sql ); $this->stmt->bindValue( ':footer', $data['footer'] ); $this->stmt->bindValue( ':modified', $now ); $this->stmt->bindValue( ':id', $data['id'], PDO::PARAM_INT ); $this->stmt->execute(); } catch( PDOException $e ){ die( $e->getMessage() ); } } function db_delete_footer( $id ) { $now = $this->get_now_date(); try { $sql = "DELETE FROM `footers`
					WHERE `footers`.`id` = :id;"; $this->stmt = $this->pdo->prepare( $sql ); $this->stmt->bindValue( ':id', $id, PDO::PARAM_INT ); $this->stmt->execute(); } catch( PDOException $e ){ die( $e->getMessage() ); } } function get_all_footer( $start, $num, &$data ) { $result = FALSE; $this->db_all_footer( $start, $num ); $row = $this->stmt->fetchAll(); $cnt = count( $row ); if($cnt >= 1) { $data = $row; $result = TRUE; } return $result; } private function db_all_footer( $start, $num ) { try { $sql = "SELECT * FROM `footers` LIMIT :start, :num"; $this->stmt = $this->pdo->prepare( $sql ); $this->stmt->bindValue( ':start', $start, PDO::PARAM_INT ); $this->stmt->bindValue( ':num', $num, PDO::PARAM_INT ); $this->stmt->execute(); } catch(PDOException $e){ die($e->getMessage()); } } function get_footer( $id, &$data ) { $result = false; $this->db_footer( $id ); $row = $this->stmt->fetchAll(); $cnt = count( $row ); if($cnt == 1) { $data = $row[0]; $result = true; } return $result; } private function db_footer( $id ) { try { $sql = "SELECT * FROM `footers` WHERE `id` = :id"; $this->stmt = $this->pdo->prepare( $sql ); $this->stmt->bindValue( ':id', $id, PDO::PARAM_INT ); $this->stmt->execute(); } catch(PDOException $e){ die($e->getMessage()); } } } 